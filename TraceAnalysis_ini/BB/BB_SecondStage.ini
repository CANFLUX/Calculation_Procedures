[Metadata]
Site_name=Burns Bog
SiteID=BB
input_path=
output_path=C:/Users/User/PostDoc_Work/Database_local/yyyy/BB/clean/SecondStage/
high_level_path={}
searchPath=auto

[dummy_for_Standardizing]
variableName=dummy_for_Standardizing
Evaluate=dummy_for_Standardizing = NaN(size(clean_tv));
title=dummy_for_Standardizing is just an array of ones - not really anything more - but this block can be used to evaluate standard/complex filtering before running the rest of the file
units=^oC
minMax=[0,1]

[TA_1_1_1]
variableName=TA_1_1_1
Evaluate=wlen=24;,thres=4;,TA_1_1_1 = run_std_dev(TA_1_1_1,clean_tv,wlen,thres);,TA_1_1_1 = calc_avg_trace(clean_tv,TA_1_1_1,TA_ECCC,-1);
title=Air temperature at 2m (HMP)
units=^oC
minMax=[-20,50]

[TA_1_2_1]
variableName=TA_1_2_1
Evaluate=TA_1_2_1 = run_std_dev(TA_1_2_1,clean_tv,wlen,thres);,TA_1_2_1 = calc_avg_trace(clean_tv,TA_1_2_1,TA_ECCC,-1);
title=Air temperature at 30cm (HMP)
units=^oC
minMax=[-20,50]

[RH_1_1_1]
variableName=RH_1_1_1
Evaluate=RH_1_1_1 = run_std_dev(RH_1_1_1,clean_tv,wlen,thres);,RH_1_1_1 = calc_avg_trace(clean_tv,RH_1_1_1,RH_ECCC,-1);
title=RH at 2m (HMP)
units=%%
minMax=[0,110]
clamped_minMax=[0,100]

[RH_1_2_1]
variableName=RH_1_2_1
Evaluate=RH_1_2_1 = run_std_dev(RH_1_2_1,clean_tv,wlen,thres);,RH_1_2_1 = calc_avg_trace(clean_tv,RH_1_2_1,RH_ECCC,-1);
title=RH at 35cm (HMP)
units=%%
minMax=[0,110]
clamped_minMax=[0,100]

[VPD_1_1_1]
variableName=VPD_1_1_1
Evaluate=[e_H,ea_H] = vappress(TA_1_1_1,RH_1_1_1);,VPD_1_1_1 = ea_H - e_H;,VPD_1_1_1 = VPD_1_1_1*10;,VPD_1_1_1 = max(VPD_1_1_1,0);
title=Vapour pressure deficit Vapour pressure deficit (from 2m HMP)
units=hPa
minMax=[0,100]

[VPD_1_2_1]
variableName=VPD_1_2_1
Evaluate=[e_H,ea_H] = vappress(TA_1_2_1,RH_1_2_1);,VPD_1_2_1 = ea_H - e_H;,VPD_1_2_1 = VPD_1_2_1*10;,VPD_1_2_1 = max(VPD_1_2_1,0);
title=Vapour pressure deficit Vapour pressure deficit (from 35cm HMP)
units=hPa
minMax=[0,100]

[TS_1_1_1]
variableName=TS_1_1_1
Evaluate=TS_1_1_1 = SpikeFilter(TS_1_1_1,clean_tv,1,1,"natural");
title=average soil temperature at 5cm depth
units=^oC
minMax=[-20,60]

[TS_1_2_1]
variableName=TS_1_2_1
Evaluate=TS_1_2_1 = SpikeFilter(TS_1_2_1,clean_tv,1,1,"natural");
title=average soil temperature at 10cm depth
units=^oC
minMax=[-20,60]

[TS_1_3_1]
variableName=TS_1_3_1
Evaluate=TS_1_3_1 = SpikeFilter(TS_1_3_1,clean_tv,1,1,"natural");
title=average soil temperature at 50cm depth
units=^oC
minMax=[-20,60]

[G_1]
variableName=G_1
Evaluate=G_1_1_1 = run_std_dev(G_1_1_1,clean_tv,wlen,thres);,G_2_1_1 = run_std_dev(G_2_1_1,clean_tv,wlen,thres);,G_3_1_1 = run_std_dev(G_3_1_1,clean_tv,wlen,thres);,G_1 = calc_avg_trace(clean_tv,[G_1_1_1, G_2_1_1, G_3_1_1]);
title=soil heat flux at 5cm depth
units=∞C
minMax=[-40,60]

[SW_IN_1_1_1]
variableName=SW_IN_1_1_1
Evaluate=SW_IN_1_1_1 = SW_IN_1_1_1;
title=incoming shortwave radiation by CNR1
units=W/m^2
minMax=[-20,2000]

[SW_OUT_1_1_1]
variableName=SW_OUT_1_1_1
Evaluate=SW_OUT_1_1_1 = SW_OUT_1_1_1;
title=reflected shortwave radiation by CNR1
units=W/m^2
minMax=[-20,1500]

[LW_IN_1_1_1]
variableName=LW_IN_1_1_1
Evaluate=LW_IN_1_1_1 = LW_IN_1_1_1;
title=incoming long wave radiation by CNR1
units=W/m^2
minMax=[50,1000]

[LW_OUT_1_1_1]
variableName=LW_OUT_1_1_1
Evaluate=LW_OUT_1_1_1 = LW_OUT_1_1_1;
title=outgoing long wave radiation by CNR1
units=W/m^2
minMax=[0,1000]

[NETRAD_1_1_1]
variableName=NETRAD_1_1_1
Evaluate=NETRAD_1_1_1 = (SW_IN_1_1_1+LW_IN_1_1_1)-(SW_OUT_1_1_1+LW_OUT_1_1_1);
title=net radiation by CNR1
units=W/m^2
minMax=[-100,1000]

[PPFD_IN_1_1_1]
variableName=PPFD_IN_1_1_1
Evaluate=PPFD_IN_1_1_1 = calc_avg_trace(clean_tv,PPFD_IN_1_1_1,SW_IN_1_1_1,-1);
title=incoming PAR
units=\mu mol/m^2/s
minMax=[-40,3000]

[PPFD_OUT_1_1_1]
variableName=PPFD_OUT_1_1_1
Evaluate=PPFD_OUT_1_1_1 = calc_avg_trace(clean_tv,PPFD_OUT_1_1_1,SW_OUT_1_1_1,-1);
title=reflected PAR
units=\mu mol/m^2/s
minMax=[-40,1500]

[PA_1_1_1]
variableName=PA_1_1_1
Evaluate=PA_1_1_1 = run_std_dev(PA_1_1_1,clean_tv,wlen,thres);,PA_1_1_1 = calc_avg_trace(clean_tv,PA_1_1_1,PA_ECCC,-1);
title=air pressure by CS106 installed in the logger box
units=kPa
minMax=[90,110]

[P_1_1_1]
variableName=P_1_1_1
Evaluate=P_1_1_1 = calc_avg_trace(clean_tv,P_1_1_1,P_ECCC,0);
title=precipitation at 1.05m height
units=mm
minMax=[0,20]

[Bog_Height]
variableName=Bog_Height
Evaluate=Bog_Height = BB_WTH_Corrections(SiteID,clean_tv,"Bog_Height");
title=Bog Surface Height
units=m
minMax=[0,200]

[Snow_Depth]
variableName=Snow_Depth
Evaluate=Snow_Depth = BB_WTH_Corrections(SiteID,clean_tv,"Snow_Depth");
title=Bog Surface Height
units=m
minMax=[0,200]

[WTH_1]
variableName=WTH_1
Evaluate=WTH_1 = BB_WTH_Corrections(SiteID,clean_tv,"WTH_1");
title=water table height
units=cm
minMax=[-250,100]

[Bog_Height_at_Well_1]
variableName=Bog_Height_at_Well_1
Evaluate=Bog_Height_at_Well_1 = BB_WTH_Corrections(SiteID,clean_tv,"Bog_Height_at_Well_1");
title=Bog Surface Height
units=m
minMax=[0,200]

[WTD_1]
variableName=WTD_1
Evaluate=WTD_1 = BB_WTH_Corrections(SiteID,clean_tv,"WTD_1");
title=water table depth (WTD_1 - Bog_Height_at_Well)
units=cm
minMax=[-250,100]

[VWC_1_1_1]
variableName=VWC_1_1_1
Evaluate=file_path = setFolderSeparator(fullfile(db_pth_root,"Calculation_Procedures/TraceAnalysis_ini/BB/Derived_Variables/VWC_Flags.csv"));,T=readtable(file_path);,DT = datetime(clean_tv,"ConvertFrom","datenum");,Change_index = table2array(T(:,1));,Sensor_postion = table2array(T(:,2));,VWC_Position=NaN(size(clean_tv));,for (i=1:length(Change_index)),VWC_Position(DT>Change_index(i),1)=Sensor_postion(i);,end,VWC_1_1_1=NaN(size(clean_tv));,VWC_1_1_1(VWC_Position==1) = VWC_raw(VWC_Position==1);,VWC_1_1_1 = SpikeFilter(VWC_1_1_1,clean_tv,1,[-.5,1],"natural");,VWC_1_1_1 = SpikeFilter(VWC_1_1_1,clean_tv,0,2,"z-score");
title=volumetric water content with sensor in hollows
units=%%
minMax=[0,100]

[VWC_2_1_1]
variableName=VWC_2_1_1
Evaluate=VWC_2_1_1=NaN(size(clean_tv));,VWC_2_1_1(VWC_Position==2) = VWC_raw(VWC_Position==2);,VWC_2_1_1 = SpikeFilter(VWC_2_1_1,clean_tv,1,[-.5,1],"natural");,VWC_2_1_1 = SpikeFilter(VWC_2_1_1,clean_tv,0,2,"z-score");
title=volumetric water content with sensor in hummocks
units=%%
minMax=[0,100]

[VWC_3_1_1]
variableName=VWC_3_1_1
Evaluate=VWC_3_1_1=NaN(size(clean_tv));,VWC_3_1_1(VWC_Position==3) = VWC_raw(VWC_Position==3);,VWC_3_1_1 = SpikeFilter(VWC_3_1_1,clean_tv,1,[-.5,1],"natural");,VWC_3_1_1 = SpikeFilter(VWC_3_1_1,clean_tv,0,2,"z-score");
title=volumetric water content with sensor in current position (seems to be a better signal)
units=%%
minMax=[0,100]

[VWC_4_1_1]
variableName=VWC_4_1_1
Evaluate=VWC_4_1_1=NaN(size(clean_tv));,VWC_4_1_1(VWC_Position==4) = VWC_raw(VWC_Position==4);,VWC_4_1_1 = SpikeFilter(VWC_4_1_1,clean_tv,1,[-.5,1],"natural");,VWC_4_1_1 = SpikeFilter(VWC_4_1_1,clean_tv,0,2,"z-score");
title=volumetric water content with sensor in current position (seems to be a better signal)
units=%%
minMax=[0,100]

[ORP_1_1_1]
variableName=ORP_1_1_1
Evaluate=ORP_1_1_1 = run_std_dev(ORP_1_1_1,clean_tv,wlen,thres);
title=oxygen reduction potential 10cm
units=mV
minMax=[-500,500]

[ORP_1_2_1]
variableName=ORP_1_2_1
Evaluate=ORP_1_1_1 = run_std_dev(ORP_1_2_1,clean_tv,wlen,thres);
title=oxygen reduction potential 30cm
units=mV
minMax=[-500,500]

[pH_1_1_1]
variableName=pH_1_1_1
Evaluate=pH_1_1_1 = run_std_dev(pH_1_1_1,clean_tv,wlen,thres);
title=water pH 10cm
units=unitless
minMax=[2, 14.5]

[pH_1_2_1]
variableName=pH_1_2_1
Evaluate=pH_1_2_1 = run_std_dev(pH_1_2_1,clean_tv,wlen,thres);
title=water pH 30cm
units=unitless
minMax=[2, 14.5]

[TW_1_1_1]
variableName=TW_1_1_1
Evaluate=TW_1_1_1 = run_std_dev(TW_1_1_1,clean_tv,wlen,thres);,TW_1_2_1 = run_std_dev(TW_1_2_1,clean_tv,wlen,thres);,TW_1_1_1 = calc_avg_trace(clean_tv,TW_1_1_1,TW_1_2_1);
title=water temperature 10cm
units=∞C
minMax=[5, 40]

[TW_1_2_1]
variableName=TW_1_2_1
Evaluate=TW_1_2_1 = calc_avg_trace(clean_tv,TW_1_2_1,TW_1_1_1);
title=water temperature 30cm
units=∞C
minMax=[5, 40]

[WS_1_1_1]
variableName=WS_1_1_1
Evaluate=WS_1_1_1 = calc_avg_trace(clean_tv,WS_1_1_1,WS_ECCC,-1);
title=wind speed by RM Young
units=m/s
minMax=[-20,20]

[WD_1_1_1]
variableName=WD_1_1_1
Evaluate=WD_1_1_1 = calc_avg_trace(clean_tv,WD_1_1_1,WD_ECCC,0);
title=wind direction at BB ECCC station
units=m/s
minMax=[0,360]

[wind_speed]
variableName=wind_speed
Evaluate=wind_speed = wind_speed;
title=Mean wind speed (CSAT3)
units=m/s
minMax=[-20,20]

[wind_dir]
variableName=wind_dir
Evaluate=wind_dir = wind_dir;
title=Direction from which the wind blows, with respect to Geographic or Magnetic north
units=m/s
minMax=[0,360]

[hpbl]
variableName=hpbl
Evaluate=hpbl = hpbl;
title=Estimated Height of Planetary Boundary Layer
units=m/s
minMax=[0,3000]

[CO2]
variableName=CO2
Evaluate=CO2 = CO2;
title=CO2 in mole fraction of wet air
units=\mu mol / mol wet air
minMax=[300,800]

[H2O]
variableName=H2O
Evaluate=H2O = H2O;
title=H2O in mole fraction of wet air
units=mm mol / mol wet air
minMax=[300,800]

[CH4]
variableName=CH4
Evaluate=CH4 = CH4;
title=CH4 in mole fraction of wet air
units=nmol / mol wet air
minMax=[1000,5500]

[USTAR]
variableName=USTAR
Evaluate=USTAR = USTAR;
title=Friction Velocity
units=m/s
minMax=[0,5]

[w_ts_cov]
variableName=w_ts_cov
Evaluate=w_ts_cov = w_ts_cov;
title=Covariance of w and sonic temperature (Sonic, after rotation)
units=m/s degK
minMax=[-2,2]

[w_h2o_cov]
variableName=w_h2o_cov
Evaluate=w_h2o_cov = w_h2o_cov;
title=Covariance of w and water vapour mixing ratio (after rotation)
units=m/s mmol/mol
minMax=[-2,2]

[w_co2_cov]
variableName=w_co2_cov
Evaluate=w_co2_cov = w_co2_cov;
title=Covariance of w and CO2 (after rotation)
units=m/s umol/mol
minMax=[-4,4]

[w_ch4_cov]
variableName=w_ch4_cov
Evaluate=w_ch4_cov = w_ch4_cov;
title=Covariance of w and CH4 (after rotation)
units=m/s nmol/mol
minMax=[-2.5,2.5]

[LE]
variableName=LE
Evaluate=LE = LE;
title=Latent Heat Flux
units=W m^{-2}
minMax=[-50,600]
Ameriflux_Variable=LE
Ameriflux_DataType=AMF_BASE_HH

[SLE]
variableName=SLE
Evaluate=SLE = SLE;
title=Estimate of storage latent heat flux
units=W m^{-2}
minMax=[-50,600]
Ameriflux_Variable=SLE
Ameriflux_DataType=AMF_BASE_HH

[H]
variableName=H
Evaluate=H = H;
title=sensible heat flux
units=W m^{-2}
minMax=[-300,800]
Ameriflux_Variable=H
Ameriflux_DataType=AMF_BASE_HH

[SH]
variableName=SH
Evaluate=SH = SH;
title=Estimate of storage sensible heat flux
units=W m^{-2}
minMax=[-300,800]
Ameriflux_Variable=SH
Ameriflux_DataType=AMF_BASE_HH

[FC]
variableName=FC
Evaluate=FC = FC;
title=CO_2 Flux
units=\mu mol m^{-2} s^{-1}
minMax=[-60,50]
Ameriflux_Variable=FC
Ameriflux_DataType=AMF_BASE_HH

[SC]
variableName=SC
Evaluate=SC = SC;
title=Estimate of storage CO2 flux
units=umol/m^2/s
minMax=[-60,50]
Ameriflux_Variable=SC
Ameriflux_DataType=AMF_BASE_HH

[NEE]
variableName=NEE
Evaluate=NEE = sum([FC,SC],2,"omitnan");,NEE(all(isnan(FC)&isnan(SC),2)) = NaN;
title=net ecosystem exchange
units=\mu mol m^{-2} s^{-1}
minMax=[-60,50]
Ameriflux_Variable=NEE
Ameriflux_DataType=AMF_BASE_HH

[FCH4]
variableName=FCH4
Evaluate=FCH4 = FCH4;
title=CH_4 Flux
units=nmol m^{-2} s^{-1}
minMax=[-200,700]
Ameriflux_Variable=FCH4
Ameriflux_DataType=AMF_BASE_HH

[SCH4]
variableName=SCH4
Evaluate=SCH4 = SCH4;
title=Estimate of storage CH4 flux
units=nmol m^{-2} s^{-1}
minMax=[-200,700]
Ameriflux_Variable=SCH4
Ameriflux_DataType=AMF_BASE_HH

[TKE]
variableName=TKE
Evaluate=TKE = TKE;
title=Turbulent kinetic energy
units=m2 s-2
minMax=[0,15]

[L]
variableName=L
Evaluate=L = L;
title=Monin-Obukhov length
units=m
minMax=[-200000,200000]

[U_SIGMA]
variableName=U_SIGMA
Evaluate=U_SIGMA = sqrt(u_var);
title=Standard deviation of velocity fluctuations
units=m s-1
minMax=[-0.01,5]

[V_SIGMA]
variableName=V_SIGMA
Evaluate=V_SIGMA = sqrt(v_var);
title=Standard deviation of lateral velocity fluctuations
units=m s-1
minMax=[-0.01,5]

[W_SIGMA]
variableName=W_SIGMA
Evaluate=W_SIGMA = sqrt(w_var);
title=Standard deviation of vertical velocity fluctuations
units=m s-1
minMax=[-0.01,2.5]

[TAU]
variableName=TAU
Evaluate=TAU = TAU;
title=Corrected momentum flux
units=kg m-1 s-2
minMax=[-2.5,2.5]

[zdL]
variableName=zdL
Evaluate=zdL = zdL;
title=Monin-Obukhov stability parameter. EddyPro output name: (z-d)/L
units=dimensionless
minMax=[-50,50]

[T_SONIC]
variableName=T_SONIC
Evaluate=T_SONIC = T_SONIC;
title=Mean temperature of ambient air as measured by the anemometer
units=C
minMax=[-30,50]

[aerodynamic_resistance_momentum]
variableName=aerodynamic_resistance_momentum
Evaluate=[ga_m_vel, ga_h_vel] = calc_aerodynamic_conductance(WS_1_1_1,USTAR,zdL);,aerodynamic_resistance_momentum = 1./ga_m_vel;
title=Aerodynamic resistance for momentum
units=s m^{-1}
minMax=[0,50000]

[aerodynamic_resistance_scalar]
variableName=aerodynamic_resistance_scalar
Evaluate=[ga_m_vel, ga_h_vel] = calc_aerodynamic_conductance(WS_1_1_1,USTAR,zdL);,aerodynamic_resistance_scalar = 1./ga_h_vel;
title=Aerodynamic resistance for heat and water vapour
units=s m^{-1}
minMax=[0,50000]

[surface_conductance]
variableName=surface_conductance
Evaluate=available_energy = (NETRAD_1_1_1 - G_1);,surface_conductance = calc_surface_conductance_as_flx(TA_1_1_1,RH_1_1_1, aerodynamic_resistance_scalar, available_energy,LE, PA_1_1_1);
title=Surface conductance
units=mol m^{-2} s^{-1}
minMax=[-5,5]

