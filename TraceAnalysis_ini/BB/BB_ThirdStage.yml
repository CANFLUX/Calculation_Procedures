# Written by June Skeeter
# March 2024

# Database:
#   data_source: MICROMET
#   tv_input: clean_tv
#   # Folder where stage three variables should be save
#   level_out: Clean/ThirdStage
#   level_in: Clean/SecondStage

Metadata:
  siteID: BB
  estYear: 2015 
  lat: 49.1296
  long: -122.9851
  TimeZoneHour: -8

REddyProc:
  do_REddyProc: 1
  Ustar_filtering:
    # Keep as True to run "fast"
    run_defaults: True
    # If run_defaults != True, conduct "full" run (e.g., see bellow)
    # EProc$sEstimateUstarScenarios(nSample = samples, probs = seq(min_quantile,max_quantile,length.out = steps))
    # See Appendix B5 Wutzler (2018)
    samples: 200
    min: 0.025
    max: 0.095
    steps: 39 
  vars_in:
    # Variables to feed to REddyProc (from second stage)
    # Key is REddyProc name, val is database name 
    # year,doy,and HHMM are autogenerated in script)
    # Any variable listed here 
    NEE: NEE
    FC: FC
    LE: LE
    H: H
    FCH4: FCH4
    Rg: SW_IN_1_1_1
    Tair: TA_1_1_1
    rH: RH_1_1_1
    VPD: VPD_1_1_1
    Ustar: USTAR
  # MDS gap filling (will only fill these variables *if* present in "vars_in")
  MDSGapFill:
    UStarScens: NEE,FC,LE,H,FCH4
    basic: Rg,Tair,rH,VPD

RF_GapFilling:
  FCH4_U95:
    # Fill the ReddyProc UStar Filtered Variable
    var_dep: FCH4_U95_orig
    Predictors: TA_1_1_1,TS_1_1_1,TS_1_2_1,TS_1_3_1,WTD_1,RH_1_1_1,VPD_1_1_1,PA_1_1_1
