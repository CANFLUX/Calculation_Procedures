[Metadata]
Site_name=Delta Site Marsh
SiteID=DSM
input_path=
output_path=/Users/ziyi/MicrometLab/local_database/yyyy/DSM/clean/SecondStage/
high_level_path={}
searchPath=auto

[TA_1_1_1]
variableName=TA_1_1_1
Evaluate=ind_delete = find(clean_tv<datenum(2021,9,4,0,30,0));,TA_ECCC(ind_delete) = NaN;,TA_1_1_1=shiftMyData(clean_tv,TA_1_1_1);,wlen=24;,thres=4;,TA_1_1_1 = run_std_dev(TA_1_1_1,clean_tv,wlen,thres);,TA_1_1_1 = calc_avg_trace(clean_tv,TA_1_1_1,TA_ECCC,-1);
title=Air temperature at 2m (HMP)
units=^oC
minMax=[-20,50]

[TA_1_2_1]
variableName=TA_1_2_1
Evaluate=TA_1_2_1 = shiftMyData(clean_tv,TA_1_2_1);,TA_1_2_1 = run_std_dev(TA_1_2_1,clean_tv,wlen,thres);,TA_1_2_1 = calc_avg_trace(clean_tv,TA_1_2_1,TA_ECCC,-1);
title=Air temperature at 350cm (HMP)
units=^oC
minMax=[-20,50]

[RH_1_1_1]
variableName=RH_1_1_1
Evaluate=RH_1_1_1 = shiftMyData(clean_tv,RH_1_1_1);,RH_1_1_1 = run_std_dev(RH_1_1_1,clean_tv,wlen,thres);,RH_1_1_1 = calc_avg_trace(clean_tv,RH_1_1_1,RH_ECCC,-1);
title=RH at 2m (HMP)
units=%%
minMax=[0,110]
clamped_minMax=[0,100]

[RH_1_2_1]
variableName=RH_1_2_1
Evaluate=RH_1_2_1 = shiftMyData(clean_tv,RH_1_2_1);,RH_1_2_1 = run_std_dev(RH_1_2_1,clean_tv,wlen,thres);,RH_1_2_1 = calc_avg_trace(clean_tv,RH_1_2_1,RH_ECCC,-1);
title=RH at 350cm (HMP)
units=%%
minMax=[0,110]
clamped_minMax=[0,100]

[VPD_1_1_1]
variableName=VPD_1_1_1
Evaluate=[e_H,ea_H] = vappress(TA_1_1_1,RH_1_1_1);,VPD_1_1_1 = ea_H - e_H;,VPD_1_1_1 = VPD_1_1_1*10;
title=Vapour pressure deficit Vapour pressure deficit (from 2m HMP)
units=hPa
minMax=[0,100]

[TS_1]
variableName=TS_1
Evaluate=TS_1_1_1 = shiftMyData(clean_tv,TS_1_1_1);,TS_1_1_1 = run_std_dev(TS_1_1_1,clean_tv,wlen,thres);,TS_2_1_1 = shiftMyData(clean_tv,TS_2_1_1);,TS_2_1_1 = run_std_dev(TS_2_1_1,clean_tv,wlen,thres);,TS_1 = calc_avg_trace(clean_tv,[TS_1_1_1,TS_2_1_1]);
title=average soil temperature at 5cm depth
units=^oC
minMax=[-20,60]

[TS_2]
variableName=TS_2
Evaluate=TS_1_2_1 = shiftMyData(clean_tv,TS_1_2_1);,TS_1_2_1 = run_std_dev(TS_1_2_1,clean_tv,wlen,thres);,TS_2_2_1 = shiftMyData(clean_tv,TS_2_2_1);,TS_2_2_1 = run_std_dev(TS_2_2_1,clean_tv,wlen,thres);,TS_2 = calc_avg_trace(clean_tv,[TS_1_2_1,TS_2_2_1]);
title=average soil temperature at 10cm depth
units=^oC
minMax=[-20,60]

[TS_3]
variableName=TS_3
Evaluate=TS_1_3_1 = shiftMyData(clean_tv,TS_1_3_1);,TS_1_3_1 = run_std_dev(TS_1_3_1,clean_tv,wlen,thres);,TS_2_3_1 = shiftMyData(clean_tv,TS_2_3_1);,TS_2_3_1 = run_std_dev(TS_2_3_1,clean_tv,wlen,thres);,TS_3 = calc_avg_trace(clean_tv,[TS_1_3_1,TS_2_3_1]);
title=average soil temperature at 20cm depth
units=^oC
minMax=[-20,60]

[TS_4]
variableName=TS_4
Evaluate=TS_1_4_1 = shiftMyData(clean_tv,TS_1_4_1);,TS_1_4_1 = run_std_dev(TS_1_4_1,clean_tv,wlen,thres);,TS_2_4_1 = shiftMyData(clean_tv,TS_2_4_1);,TS_2_4_1 = run_std_dev(TS_2_4_1,clean_tv,wlen,thres);,TS_4 = calc_avg_trace(clean_tv,[TS_1_4_1,TS_2_4_1]);
title=average soil temperature at 50cm depth
units=^oC
minMax=[-20,60]

[G_1]
variableName=G_1
Evaluate=p=find(clean_tv<=datenum(2021,09,09,12,30,0));,mins =[min(G_1_1_1), min(G_2_1_1),  min(G_3_1_1)];,maxs =[max(G_1_1_1), max(G_2_1_1),  max(G_3_1_1)];,slps =[ 40.9846,  39.0569,  29.2824];,ofts =[-16.8590, -16.1501, -11.2575];,G_1_1_1(p)=slps(1)*((G_1_1_1(p)-mins(1))./(maxs(1)-mins(1)))+ofts(1);,G_2_1_1(p)=slps(2)*((G_2_1_1(p)-mins(2))./(maxs(2)-mins(2)))+ofts(2);,G_3_1_1(p)=slps(3)*((G_3_1_1(p)-mins(3))./(maxs(3)-mins(3)))+ofts(3);,G_1_1_1 = shiftMyData(clean_tv,G_1_1_1);,G_1_1_1 = run_std_dev(G_1_1_1,clean_tv,wlen,thres);,G_2_1_1 = shiftMyData(clean_tv,G_2_1_1);,G_2_1_1 = run_std_dev(G_2_1_1,clean_tv,wlen,thres);,G_3_1_1 = shiftMyData(clean_tv,G_3_1_1);,G_3_1_1 = run_std_dev(G_3_1_1,clean_tv,wlen,thres);,G_1 = calc_avg_trace(clean_tv,[G_1_1_1, G_2_1_1, G_3_1_1]);
title=soil heat flux at 5cm depth
units=∞C
minMax=[-40,60]

[SW_IN_1_1_1]
variableName=SW_IN_1_1_1
Evaluate=SW_IN_1_1_1 = shiftMyData(clean_tv,SW_IN_1_1_1);,SW_IN_1_1_1 = calc_avg_trace(clean_tv,SW_IN_1_1_1,RBM_SW_IN_1_1_1,-1);
title=incoming shortwave radiation by CNR4
units=W/m^2
minMax=[-20,2000]

[SW_OUT_1_1_1]
variableName=SW_OUT_1_1_1
Evaluate=SW_OUT_1_1_1 = shiftMyData(clean_tv,SW_OUT_1_1_1); %% Time Shift Correction
title=reflected shortwave radiation by CNR4
units=W/m^2
minMax=[-20,1500]

[LW_IN_1_1_1]
variableName=LW_IN_1_1_1
Evaluate=LW_IN_1_1_1 = shiftMyData(clean_tv,LW_IN_1_1_1);,LW_IN_1_1_1 = calc_avg_trace(clean_tv,LW_IN_1_1_1,RBM_LW_IN_1_1_1,-1);
title=incoming long wave radiation by CNR4
units=W/m^2
minMax=[50,1000]

[LW_OUT_1_1_1]
variableName=LW_OUT_1_1_1
Evaluate=LW_OUT_1_1_1 = shiftMyData(clean_tv,LW_OUT_1_1_1);,LWoutCorrection
title=outgoing long wave radiation by CNR4
units=W/m^2
minMax=[0,1000]

[RG_1_1_1]
variableName=RG_1_1_1
Evaluate=RG_1_1_1 = SW_IN_1_1_1+LW_IN_1_1_1;
title=Global Radiation - total incoming SW & LW
units=W/m^2
minMax=[-100,1000]

[NETRAD_1_1_1]
variableName=NETRAD_1_1_1
Evaluate=NETRAD_1_1_1 = shiftMyData(clean_tv,NETRAD_1_1_1);,LWoutCorrection
title=net radiation by CNR4
units=W/m^2
minMax=[-100,1000]

[ALB_1_1_1]
variableName=ALB_1_1_1
Evaluate=ALB_1_1_1 = shiftMyData(clean_tv,ALB_1_1_1); %% Time Shift Correction
title=albedo by CNR4
units=%%
minMax=[-10,110]
clamped_minMax=[0,100]

[PPFD_IN_1_1_1]
variableName=PPFD_IN_1_1_1
Evaluate=PPFD_IN_1_1_1 = shiftMyData(clean_tv,PPFD_IN_1_1_1);,PPFD_IN_1_1_1 = calc_avg_trace(clean_tv,PPFD_IN_1_1_1,RBM_PPFD_IN_1_1_1,-1);
title=incoming PAR
units=\mu mol/m^2/s
minMax=[-40,3000]

[PPFD_OUT_1_1_1]
variableName=PPFD_OUT_1_1_1
Evaluate=PPFD_OUT_1_1_1 = shiftMyData(clean_tv,PPFD_OUT_1_1_1); %% Time Shift Correction
title=reflected PAR
units=\mu mol/m^2/s
minMax=[-40,1500]

[PPFD_IN_2_1_1]
variableName=PPFD_IN_2_1_1
Evaluate=PPFD_IN_2_1_1 = shiftMyData(clean_tv,PPFD_IN_2_1_1); %% Time Shift Correction
title=incoming PAR measured by BF5
units=\mu mol/m^2/s
minMax=[-40,3000]

[PPFD_DIF_1_1_1]
variableName=PPFD_DIF_1_1_1
Evaluate=PPFD_DIF_1_1_1 = shiftMyData(clean_tv,PPFD_DIF_1_1_1); %% Time Shift Correction
title=diffuse PAR measured by BF5
units=\mu mol/m^2/s
minMax=[-40,3000]

[PRI_1_1_1]
variableName=PRI_1_1_1
Evaluate=PRI_1_1_1 = shiftMyData(clean_tv,PRI_1_1_1); %% Time Shift Correction
title=Photochemical reflectance index
units=nondimensional
minMax=[-1.1,1.1]
clamped_minMax=[-1,1]

[NDVI_1_1_1]
variableName=NDVI_1_1_1
Evaluate=NDVI_1_1_1 = shiftMyData(clean_tv,NDVI_1_1_1); %% Time Shift Correction
title=Normalized difference vegetation index
units=nondimensional
minMax=[-1.1,1.1]
clamped_minMax=[-1,1]

[PA_1_1_1]
variableName=PA_1_1_1
Evaluate=PA_ECCC(ind_delete) = NaN;,PA_1_1_1 = shiftMyData(clean_tv,PA_1_1_1);,PA_1_1_1(PA_1_1_1<95) = NaN;,PA_1_1_1 = run_std_dev(PA_1_1_1,clean_tv,wlen,thres);,PA_1_1_1 = calc_avg_trace(clean_tv,PA_1_1_1,PA_ECCC,-1);
title=air pressure by CS106 installed in the logger box
units=kPa
minMax=[90,110]

[P_1_1_1]
variableName=P_1_1_1
Evaluate=P_ECCC(ind_delete) = NaN;,P_1_1_1 = shiftMyData(clean_tv,P_1_1_1);,P_1_1_1 = calc_avg_trace(clean_tv,P_1_1_1,P_ECCC,-1);
title=precipitation at 1.05m height
units=mm
minMax=[0,20]

[DO_1_1_1]
variableName=DO_1_1_1
Evaluate=DO_1_1_1 = DO_1_1_1;
title=dissolved oxygen
units=mg/l
minMax=[0,70000]

[DOperc_1_1_1]
variableName=DOperc_1_1_1
Evaluate=DOperc_1_1_1 = DOperc_1_1_1;
title=dissolved oxygen ratio
units=%% saturation
minMax=[0,70000]

[COND_WATER_1_1_1]
variableName=COND_WATER_1_1_1
Evaluate=COND_WATER_1_1_1 = run_std_dev(COND_WATER_1_1_1,clean_tv,wlen,thres);
title=conductivity of water
units=microS/cm
minMax=[0,70000]

[Salinity]
variableName=Salinity
Evaluate=Salinity = ((COND_WATER_1_1_1/1000).^1.0878).*0.4665;
title=Salinity
units=ppt
minMax=[0,50]

[WTD_1_1_1]
variableName=WTD_1_1_1
Evaluate=WTD_1_1_1 = run_std_dev(WTD_1_1_1,clean_tv,wlen,thres);
title=water table height
units=m
minMax=[0.1,3]

[ORP_1_1_1]
variableName=ORP_1_1_1
Evaluate=ORP_1_1_1 = run_std_dev(ORP_1_1_1,clean_tv,wlen,thres);
title=oxygen reduction potential
units=mV
minMax=[-500,500]

[pH_1_1_1]
variableName=pH_1_1_1
Evaluate=pH_1_1_1 = run_std_dev(pH_1_1_1,clean_tv,wlen,thres);
title=water pH
units=unitless
minMax=[2, 14.5]

[TW_1_1_1]
variableName=TW_1_1_1
Evaluate=TW_1_1_1 = run_std_dev(TW_1_1_1,clean_tv,wlen,thres);
title=water temperature
units=∞C
minMax=[5, 40]

[WS_1_1_1]
variableName=WS_1_1_1
Evaluate=WS_ECCC(ind_delete) = NaN;,WS_1_1_1 = shiftMyData(clean_tv,WS_1_1_1);,WS_1_1_1 = calc_avg_trace(clean_tv,WS_1_1_1,WS_ECCC,-1);
title=wind speed by RM Young 05103
units=m/s
minMax=[-20,20]

[WD_1_1_1]
variableName=WD_1_1_1
Evaluate=WD_ECCC(ind_delete) = NaN;,WD_1_1_1 = shiftMyData(clean_tv,WD_1_1_1);,WD_1_1_1 = calc_avg_trace(clean_tv,WD_1_1_1,WD_ECCC,-1);
title=wind direction by RM Young 05103
units=m/s
minMax=[0,360]

[wind_speed]
variableName=wind_speed
Evaluate=wind_speed = calc_avg_trace(clean_tv,wind_speed,WS_ECCC,-1);
title=Mean wind speed (CSAT3)
units=m/s
minMax=[-20,20]

[wind_dir]
variableName=wind_dir
Evaluate=wind_dir = calc_avg_trace(clean_tv,wind_dir,WD_ECCC,-1);
title=Direction from which the wind blows, with respect to Geographic or Magnetic north
units=m/s
minMax=[0,360]

[badWD]
variableName=badWD
Evaluate=upper = 30; lower = 330;,badWD = find(WD_1_1_1 >= lower | WD_1_1_1 <= upper);
title=wind direction data to be filtered out due to site layout
units=m/s
minMax=[0,360]

[CO2]
variableName=CO2
Evaluate=CO2 = CO2;
title=CO2 in mole fraction of wet air
units=\mu mol / mol wet air
minMax=[300,800]

[H2O]
variableName=H2O
Evaluate=H2O = H2O;
title=H2O in mole fraction of wet air
units=mm mol / mol wet air
minMax=[300,800]

[CH4]
variableName=CH4
Evaluate=CH4 = CH4;
title=CH4 in mole fraction of wet air
units=nmol / mol wet air
minMax=[1000,5500]

[w_ts_cov]
variableName=w_ts_cov
Evaluate=w_ts_cov(badWD)=NaN;
title=Covariance of w and sonic temperature (Sonic, after rotation)
units=m/s degK
minMax=[-2,2]

[w_h2o_cov]
variableName=w_h2o_cov
Evaluate=w_h2o_cov(badWD)=NaN;
title=Covariance of w and water vapour mixing ratio (after rotation)
units=m/s mmol/mol
minMax=[-2,2]

[w_co2_cov]
variableName=w_co2_cov
Evaluate=w_co2_cov(badWD)=NaN;
title=Covariance of w and CO2 (after rotation)
units=m/s umol/mol
minMax=[-4,4]

[w_ch4_cov]
variableName=w_ch4_cov
Evaluate=w_ch4_cov(badWD)=NaN;
title=Covariance of w and CH4 (after rotation)
units=m/s nmol/mol
minMax=[-2.5,2.5]

[LE]
variableName=LE
Evaluate=LE(badWD)=NaN;
title=Latent Heat Flux
units=W m^{-2}
minMax=[-50,600]
Ameriflux_Variable=LE
Ameriflux_DataType=AMF_BASE_HH

[SLE]
variableName=SLE
Evaluate=SLE(badWD)=NaN;
title=Estimate of storage latent heat flux
units=W m^{-2}
minMax=[-50,600]
Ameriflux_Variable=SLE
Ameriflux_DataType=AMF_BASE_HH

[H]
variableName=H
Evaluate=H(badWD)=NaN;
title=sensible heat flux
units=W m^{-2}
minMax=[-300,800]
Ameriflux_Variable=H
Ameriflux_DataType=AMF_BASE_HH

[SH]
variableName=SH
Evaluate=SH(badWD)=NaN;
title=Estimate of storage sensible heat flux
units=W m^{-2}
minMax=[-300,800]
Ameriflux_Variable=SH
Ameriflux_DataType=AMF_BASE_HH

[FC]
variableName=FC
Evaluate=FC(badWD)=NaN;
title=CO_2 Flux
units=\mu mol m^{-2} s^{-1}
minMax=[-60,50]
Ameriflux_Variable=FC
Ameriflux_DataType=AMF_BASE_HH

[SC]
variableName=SC
Evaluate=SC(badWD)=NaN;
title=Estimate of storage CO2 flux
units=umol/m^2/s
minMax=[-60,50]
Ameriflux_Variable=SC
Ameriflux_DataType=AMF_BASE_HH

[NEE]
variableName=NEE
Evaluate=NEE = sum([FC,SC],2,omitnan);,NEE(all(isnan(FC)&isnan(SC),2)) = NaN;
title=net ecosystem exchange
units=\mu mol m^{-2} s^{-1}
minMax=[-60,50]
Ameriflux_Variable=NEE
Ameriflux_DataType=AMF_BASE_HH

[FCH4]
variableName=FCH4
Evaluate=FCH4(badWD)=NaN;
title=CH_4 Flux
units=nmol m^{-2} s^{-1}
minMax=[-200,700]
Ameriflux_Variable=FCH4
Ameriflux_DataType=AMF_BASE_HH

[SCH4]
variableName=SCH4
Evaluate=SCH4(badWD)=NaN;
title=Estimate of storage CH4 flux
units=nmol m^{-2} s^{-1}
minMax=[-200,700]
Ameriflux_Variable=SCH4
Ameriflux_DataType=AMF_BASE_HH

[USTAR]
variableName=USTAR
Evaluate=USTAR = USTAR;
title=Friction Velocity
units=m/s
minMax=[0,5]

[TKE]
variableName=TKE
Evaluate=TKE(badWD)=NaN;
title=Turbulent kinetic energy
units=m2 s-2
minMax=[0,15]

[L]
variableName=L
Evaluate=L = L;
title=Monin-Obukhov length
units=m
minMax=[-200000,200000]

[U_SIGMA]
variableName=U_SIGMA
Evaluate=U_SIGMA = sqrt(u_var);
title=Standard deviation of velocity fluctuations
units=m s-1
minMax=[-0.01,5]

[V_SIGMA]
variableName=V_SIGMA
Evaluate=V_SIGMA = sqrt(v_var);
title=Standard deviation of lateral velocity fluctuations
units=m s-1
minMax=[-0.01,5]

[W_SIGMA]
variableName=W_SIGMA
Evaluate=W_SIGMA = sqrt(w_var);
title=Standard deviation of vertical velocity fluctuations
units=m s-1
minMax=[-0.01,2.5]

[TAU]
variableName=TAU
Evaluate=TAU(badWD)=NaN;
title=Corrected momentum flux
units=kg m-1 s-2
minMax=[-2.5,2.5]

[zdL]
variableName=zdL
Evaluate=zdL = zdL;
title=Monin-Obukhov stability parameter. EddyPro output name: (z-d)/L
units=dimensionless
minMax=[-50,50]

[aerodynamic_resistance_momentum]
variableName=aerodynamic_resistance_momentum
Evaluate=[ga_m_vel, ga_h_vel] = calc_aerodynamic_conductance(WS_1_1_1,USTAR,zdL);,aerodynamic_resistance_momentum = 1./ga_m_vel;
title=Aerodynamic resistance for momentum
units=s m^{-1}
minMax=[0,50000]

[aerodynamic_resistance_scalar]
variableName=aerodynamic_resistance_scalar
Evaluate=[ga_m_vel, ga_h_vel] = calc_aerodynamic_conductance(WS_1_1_1,USTAR,zdL);,aerodynamic_resistance_scalar = 1./ga_h_vel;
title=Aerodynamic resistance for heat and water vapour
units=s m^{-1}
minMax=[0,50000]

[surface_conductance]
variableName=surface_conductance
Evaluate=available_energy = (NETRAD_1_1_1 - G_1);,surface_conductance = calc_surface_conductance_as_flx(TA_1_1_1,...RH_1_1_1, aerodynamic_resistance_scalar, available_energy,...LE, PA_1_1_1);
title=Surface conductance
units=mol m^{-2} s^{-1}
minMax=[-5,5]

[hpbl]
variableName=hpbl
Evaluate=hpbl = hpbl;
title=Estimated Height of Planetary Boundary Layer
units=m/s
minMax=[0,3000]

